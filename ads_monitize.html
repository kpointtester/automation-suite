<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>VXPlayer Demo</title>
  <style>
    #vxplayer-container {
      border: 2px solid #000;
      padding: 10px;
      margin: 20px;
    }
    iframe {
      width: 100%;
      height: 250px;
    }
    #log {
      background: #f3f3f3;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h2>VXPlayer Event Tester</h2>
  <div id="vxplayer-container"></div>

  <h3>Logs</h3>
  <div id="log"></div>

  <script>
    function log(msg) {
      const logBox = document.getElementById("log");
      const time = new Date().toLocaleTimeString();
      logBox.textContent += `[${time}] ${msg}\n`;
      logBox.scrollTop = logBox.scrollHeight;
    }

    // Listen to messages from iframe
    window.addEventListener("message", (e) => {
      const { type, data, msgToken } = e.data;
      if (!type || !msgToken) return;
      log(`ðŸŸ© iframe(${msgToken}) -> ${type} ${JSON.stringify(data || {})}`);
    });

    function initializeVXPlayer() {
      const container = document.querySelector("#vxplayer-container");

      const videoIds = [
        'gcc-306f3d17-284b-468a-924b-461acbd99259',
        {
          type: 'iframe',
          url: './ad_replica.html?msgToken=unique-id-124',
          id: 'unique-id-124'
        },
        'gcc-7ff897ee-90aa-4bf9-93b1-889f38a6167d',
        'gcc-407a01e4-3bc6-46ed-b9a0-fd65c1e227e4',
        {
          type: 'iframe',
          url: './ad_replica.html?msgToken=unique-id-125',
          id: 'unique-id-125'
        },
      ];

      // Simulate VXPlayer logic
      window.VXPlayer(container, {
        hostname: 'showcase-qa.zencite.in',
        type: 'reels',
        videoIds
      });
    }

    if (window.VXPlayer) {
      initializeVXPlayer();
    } else {
      document.addEventListener("vxplayerready", initializeVXPlayer);
    }
  </script>

  <!-- Load simulated VXPlayer -->
  <script src="https://assets.zencite.in/orca/media/embed/player-vx.js"></script>
</body>
</html>
